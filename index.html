<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>易經靈龜占卜（含卦辭/爻辭白話）</title>
    <style>
        :root {
            --bg-color: #f4f1ea;
            --text-color: #333;
            --accent-color: #8b0000; /* 朱砂紅 */
            --yang-color: #2c3e50;
            --yin-color: #2c3e50;
            --moving-color: #c0392b;
        }

        body {
            font-family: "Noto Serif TC", "Songti TC", serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        h1 {
            letter-spacing: 5px;
            color: var(--accent-color);
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            cursor: pointer;
            border-radius: 50px;
            font-family: inherit;
            transition: background 0.3s, transform 0.1s;
            margin-bottom: 30px;
        }

        button:hover {
            background-color: #a52a2a;
        }

        button:active {
            transform: scale(0.98);
        }

        .result-area {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
            opacity: 0;
            transition: opacity 1s ease-in;
        }

        .gua-container {
            width: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .gua-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent-color);
        }

        .lines-box {
            display: flex;
            flex-direction: column-reverse; /* 易經是從下往上畫 */
            gap: 10px;
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            background: #fffcf5;
        }

        /* 爻的樣式 */
        .line {
            height: 20px;
            width: 100%;
            position: relative;
            display: flex;
            justify-content: space-between;
        }

        /* 陽爻 --- */
        .yang {
            background-color: var(--yang-color);
            width: 100%;
        }

        /* 陰爻 - - */
        .yin {
            width: 100%;
            display: flex;
            justify-content: space-between;
        }
        .yin::before, .yin::after {
            content: '';
            width: 42%;
            background-color: var(--yin-color);
            height: 100%;
            display: block;
        }

        /* 變爻標記 */
        .moving.yang { background-color: var(--moving-color); }
        .moving.yin::before, .moving.yin::after { background-color: var(--moving-color); }

        .desc-text {
            margin-top: 30px;
            text-align: left;
            line-height: 1.8;
            border-top: 1px solid #ccc;
            padding-top: 20px;
        }
        
        .loading {
            display: none;
            font-size: 1.2rem;
            color: #666;
            margin: 20px 0;
        }

    </style>
</head>
<body>
    <div class="wrap">
        <header>
            <h1>易經線上占卜（卦辭 + 爻辭白話版）</h1>
            <p class="small">經文保留，變爻爻辭附上簡短白話釋義（你選擇的格式：經文不變，爻辭加白話）。</p>
        </header>

        <div class="card">
            <p>誠心默念你的疑問，按「誠心起卦」開始。</p>
            <button onclick="castHexagram()">誠心起卦</button>
            <span id="loading" class="small" style="display:none;margin-left:10px;">正在演算...</span>

            <div id="result" class="result-area" style="opacity:0;transition:opacity .6s;"></div>

            <div id="extra" style="display:none;margin-top:14px;">
                <div class="card">
                    <div class="section-title">卦辭與爻辭（經文 + 白話）</div>
                    <div id="interpretation"></div>
                </div>

<script>
/* -------------------------
   資料庫：卦辭 + 爻辭（示範部份卦）
   格式：
   hexagramDatabase["binary"] = {
       name: "乾為天",
       guaText: "乾：元亨，利貞。",
       lineTexts: ["初九：潛龍勿用。", "九二：...","..."] ,
       lineNotes: ["白話1","白話2",...]
   }
   binary 字串為從下往上（初爻到上爻）1=陽 0=陰
   ------------------------- */

/* 範例資料：示範收錄 12 個常見卦（你可要求我把剩餘全部 64 卦補齊） */
const hexagramDatabase = {
    "111111": {
        name: "乾為天",
        guaText: "乾：元亨，利貞。",
        lineTexts: [
            "初九：潛龍勿用。",
            "九二：見龍在田，利見大人。",
            "九三：君子終日乾乾，夕惕若，厲無咎。",
            "九四：或躍在淵，無咎。",
            "九五：飛龍在天，利見大人。",
            "上九：亢龍，有悔。"
        ],
        lineNotes: [
            "初九：潛伏期，尚未行動，耐心等待。",
            "九二：時機來了，可出面與重要人物互動。",
            "九三：勤於自我警惕，若能自省，無大錯。",
            "九四：躍躍欲試但仍有節制，尚無災難。",
            "九五：事業達到高點，適合展現領導。",
            "上九：過於驕傲或超過界限會後悔。"
        ]
    },
    "000000": {
        name: "坤為地",
        guaText: "坤：元亨，利牝馬之貞。君子有攸往，先迷後得主，利西南得朋，東北喪朋，安貞吉。",
        lineTexts: [
            "初六：履霜，堅冰至。",
            "六二：直方大，不習無不利。",
            "六三：含章可貞。或從王事，無成有終。",
            "六四：括囊；無咎無譽。",
            "六五：黃裳，元吉。",
            "上六：龍戰於野，其血玄黃。"
        ],
        lineNotes: [
            "初六：小心行事，將來可能出現更嚴重的問題。",
            "六二：堅持正直，行事有利。",
            "六三：保持涵養，或參與重大事務，最終能保全。",
            "六四：低調謹慎，不求名譽，避免過度抉擇。",
            "六五：中正安定，最終吉。",
            "上六：遇紛爭，狀況混亂且難以善後。"
        ]
    },
    "100010": {
        name: "水雷屯",
        guaText: "屯：元亨，利貞。勿用有攸往，利建侯。",
        lineTexts: [
            "初九：磐桓，利居貞，利建侯。",
            "六二：屯如邅如，匪寇，婚媾，往吉，無不利。",
            "六三：即鹿無虞，惟入於林中，君子幾不如夙興。",
            "六四：乘馬班如，求婚媾，利見小人，勿恤，往有功。",
            "九五：屯其膿，吝。",
            "上六：乘馬班如，泣血涕，言告師，失馬。"
        ],
        lineNotes:[
            "初九：初始困難但有利於堅守並建立根基。",
            "六二：困境中仍可前行，婚姻或人際可成。",
            "六三：面對不確定，需早起努力以免危險。",
            "六四：採取行動可有成果，留意小人但不需過度憂慮。",
            "九五：遇阻有不易處理之事，行事要謹慎。",
            "上六：危機加劇，情緒化會導致損失。"
        ]
    },
    "111010": {
        name: "水天需",
        guaText: "需：有孚，光亨，貞吉。利涉大川。",
        lineTexts:[
            "初九：需于郊，利用恒。",
            "九二：需于沙，小有言，終吉。",
            "六三：需于泥，致寇至。",
            "九四：需于血，居賢吉。",
            "九五：需于酒食，貞吉。",
            "上九：入于穴，有不速之客三人來，敬之終吉。"
        ],
        lineNotes:[
            "初九：在邊緣靜候，持之以恆有利。",
            "九二：小阻礙會有言語干擾，但最後吉祥。",
            "六三：深陷泥濘，會招致麻煩。",
            "九四：靠德行而處之，則吉。",
            "九五：通過禮儀與交流，可守正得吉。",
            "上九：處理不可預期來客時，恭敬周到則吉。"
        ]
    },
    "010111": {
        name: "天水訟",
        guaText: "訟：有孚窮寇，勿用師。自邑告命，貞吝。",
        lineTexts:[
            "初九：不克訟，歸而逋其邑人三百戶，無眚。",
            "六二：不克訟，在城以中見利，無咎。",
            "六三：食舊德，貞厲，終吉，或從王事無成。",
            "九四：或訟或笑，終吝。",
            "九五：讼元，吉。",
            "上九：或錫之鞶帶，終朝三日，不克訟。"
        ],
        lineNotes:[
            "初九：無法與人爭訟，收手可能避免災難。",
            "六二：在原地堅守可得利，勿輕舉妄動。",
            "六三：持守舊德，處境雖嚴但能有好結果。",
            "九四：糾紛或化為笑談，最後仍有損失。",
            "九五：處理爭端若遵正道可得吉利。",
            "上九：雖受賞，實難解決根本爭執。"
        ]
    },
    "010000": {
        name: "地水師",
        guaText: "師：貞，丈人吉。無咎。",
        lineTexts:[
            "初六：師出以律，否臧凶。",
            "九二：在師中吉，無咎，王三錫命。",
            "六三：師或舊，凶。",
            "六四：田有禽，利執言，無咎。",
            "六五：貞，指乎臨，元吉。",
            "上六：大君有命，開國承家，小人勿用。"
        ],
        lineNotes:[
            "初六：行動需有紀律，否則不利。",
            "九二：在團隊中能得吉利，受重視。",
            "六三：用舊的方法會招凶險。",
            "六四：抓住機會言明立場可無咎。",
            "六五：堅守正道會得大吉。",
            "上六：大事由上層決定，小人不要干擾。"
        ]
    },
    "000010": {
        name: "水地比",
        guaText: "比：吉，原筮，元永貞，無咎。",
        lineTexts:[
            "初六：有孚比之，吉。",
            "六二：比之自內，貞吉。",
            "六三：比之匪人，勿恤，往有尚。",
            "九四：比之匪人，後悔吝。",
            "九五：有孚惠心，勿問，元吉。",
            "上六：比之無首，凶。"
        ],
        lineNotes:[
            "初六：誠心結盟，吉利。",
            "六二：從內部建立信任，守正吉。",
            "六三：與非志同道合者結盟需小心，但仍可能有益。",
            "九四：與不誠者結合會後悔。",
            "九5白話：懷有善心不問回報則大吉。",
            "上六：無領導的結合會導致凶險。"
        ]
    },
    "111011": {
        name: "風天小畜",
        guaText: "小畜：亨。密雲不雨，自我西郊。",
        lineTexts:[
            "初九：復自道，何其咎？",
            "九二：牽復，吉。",
            "九三：輿說輻。",
            "九四：有孚，血去惕出。",
            "九五：有孚攸往，縱在中行，無咎。",
            "上九：既西既東，利施。"
        ],
        lineNotes:[
            "初九：回頭修正道路，不是大問題。",
            "九二：牽回調整可得吉利。",
            "九三：交通或關係出現問題，需要調整。",
            "九四：誠信並有警惕，仍有轉機。",
            "九五：信念明確、行動居中可無咎。",
            "上九：多方兼顧可有所施展。"
        ]
    },
    "111000": {
        name: "地天泰",
        guaText: "泰：小往大來，吉亨。",
        lineTexts:[
            "初六：拔茅茹，以其彙，征吉。",
            "九二：包荒，用冯河，不遐遺，朋亡，得尚於中行。",
            "九三：无平不陂，无往不復，艱貞无咎。",
            "九四：翩翩不富，以其鄰，不戒以孚。",
            "九五：帝乙歸妹，其于郊，利涉大川，利貞。",
            "上九：城復于隍，勿用攻。"
        ],
        lineNotes:[
            "初六：拔除障礙，群策群力，征途有吉。",
            "九二：整頓荒蕪，結伴並進可得成。",
            "九三：起伏常有，但堅守正道無咎。",
            "九四：保持良好的鄰里關係而不貪財。",
            "九五：與重要人物互動，行事慎重可利大事。",
            "上九：攻擊會反受其害，應守勢。"
        ]
    },
    "000111": {
        name: "天地否",
        guaText: "否：否之匪人，不利有攸往。",
        lineTexts:[
            "初九：拔茅茹，以其彙，貞吉，亨。",
            "六二：包承小人，吉。",
            "六三：包羞。",
            "六四：有命无咎，志行也。",
            "九五：休否，大人吉。",
            "上六：杞憂。"
        ],
        lineNotes:[
            "初九：從基層改起，可得吉亨。",
            "六二：小人暫時幫忙但需戒慎。",
            "六三：有羞辱之事，要保持節制。",
            "六四：順從命運而行，無咎。",
            "九五：否極泰來，等候良機。",
            "上六：無謂擔憂。"
        ]
    },
  "111011": {
    name: "風天小畜",
    guaText: "小畜：亨。密雲不雨，自我西郊。",
    lineTexts: [
      "初九：復自道，何其咎？吉。",
      "九二：牽復，吉。",
      "九三：輿說輹，夫妻反目。",
      "六四：有孚血，吉。",
      "九五：有孚攣如，富以其鄰。",
      "上九：既雨既處，尚德載，婦貞厲。月幾望，君子征凶。"
    ],
    lineNotes: [
      "初九：回到正確的道路，自然無咎並有吉祥。",
      "九二：由他人引導回到正途，吉利。",
      "九三：衝突或阻礙使合作破裂，如同夫妻口角。",
      "六四：以誠信解決糾紛，危險得以化解，結果吉利。",
      "九五：有誠信且彼此緊密相連，能互惠互利。",
      "上九：雨過天晴後氣氛安定，但婦人若固執則有危；接近滿月之時，君子行動恐遇凶險。"
    ]
  },

  "110111": {
    name: "天澤履",
    guaText: "履：履虎尾，不咥人，亨。",
    lineTexts: [
      "初九：素履往，無咎。",
      "九二：履道坦坦，幽人貞吉。",
      "六三：眇能視，跛能履，履虎尾，咥人，凶。",
      "九四：履虎尾，愬愬，終吉。",
      "九五：夬履，貞厲。",
      "上九：視履考祥，其旋元吉。"
    ],
    lineNotes: [
      "初九：以樸素的方式行事，不招惹危險，可無咎。",
      "九二：正直坦蕩如履平坦大道，雖深藏不露仍得吉利。",
      "六三：能力不足卻硬要冒險，如踩虎尾反遭咬傷，凶。",
      "九四：雖驚惶謹慎，但憑警覺最終得到吉利。",
      "九五：態度太強硬，雖正但危險，須謹慎。",
      "上九：審慎觀察自身行動，才能獲得最終的吉祥。"
    ]
  },

  "111000": {
    name: "地天泰",
    guaText: "泰：小往大來，吉亨。",
    lineTexts: [
      "初九：拔茅茹，以其彙，征吉。",
      "九二：包荒，用馮河，不遐遺，朋亡，得尚於中行。",
      "九三：無平不陂，無往不復，艱貞無咎。勿恤其孚，于食有福。",
      "六四：翩翩，不富以其鄰，不戒以孚。",
      "六五：帝乙歸妹，以祉元吉。",
      "上六：城復于隍，勿用師，自邑告命。貞吝。"
    ],
    lineNotes: [
      "初九：同伴相互牽引前行，團隊一致可獲吉利。",
      "九二：包容一切並勇於行動，能跨越困難，得到正當的名望。",
      "九三：事物盛極必衰，但守正能避免災難，並享福。",
      "六四：不需刻意操縱他人，以誠信自然感召。",
      "六五：如吉禮婚嫁般順利，大吉大利。",
      "上六：盛極而轉衰，防止敗壞，訟事應節制，否則終有憾。"
    ]
  },

  "000111": {
    name: "天地否",
    guaText: "否：否之匪人，不利君子貞，大往小來。",
    lineTexts: [
      "初六：拔茅茹，以其彙，貞吉亨。",
      "六二：包承，小人吉；大人否亨。",
      "六三：包羞。",
      "九四：有命無咎，疇離祉。",
      "九五：休否，大人吉；其亡其亡，繫于苞桑。",
      "上九：傾否，先否後喜。"
    ],
    lineNotes: [
      "初六：如同根系相連的茅草，團結一致可獲吉利。",
      "六二：包容與承擔可帶來吉利，但對有德者反生阻礙。",
      "六三：行事不當而蒙羞辱。",
      "九四：天命如此，順勢而為可得吉兆。",
      "九五：否運將過，大人守正則吉；但仍需警覺危機。",
      "上九：困境終會瓦解，先苦後樂。"
    ]
  },

  "101111": {
    name: "天火同人",
    guaText: "同人：同人于野，亨。利涉大川，利君子貞。",
    lineTexts: [
      "初九：同人于門，無咎。",
      "六二：同人于宗，吝。",
      "九三：伏戎于莽，升其高陵，三歲不興。",
      "九四：乘其墉，弗克攻，吉。",
      "九五：同人，先號咷而後笑，大師克相遇。",
      "上九：同人于郊，無悔。"
    ],
    lineNotes: [
      "初九：在家門口與人同心協作，沒有過失。",
      "六二：只與親近之人結盟，會形成狹隘，令人遺憾。",
      "九三：暗中積怨或埋伏，恐怕長期無法成功。",
      "九四：雖登高牆施力，仍無法攻下，但因退守反得吉。",
      "九五：經歷痛苦後終能相會並協作成功。",
      "上九：在更廣大的地方結合共識，不會後悔。"
    ]
  },

  "111101": {
    name: "火天大有",
    guaText: "大有：元亨。",
    lineTexts: [
      "初九：無交害，匪咎，艱則無咎。",
      "九二：大車以載，有攸往，無咎。",
      "九三：公用亨于天子，小人弗克。",
      "九四：匪其彭，無咎。",
      "六五：厥孚交如，威如；吉。",
      "上九：自天祐之，吉無不利。"
    ],
    lineNotes: [
      "初九：不結交害人之人，即可免咎；遇難也能安然。",
      "九二：能力足以承擔重任，行動無咎。",
      "九三：君子能獲天子賞識，小人則無法。",
      "九四：不因外在空虛誇大自己，保持真實即可無咎。",
      "六五：誠信互通且具威信，結果吉利。",
      "上九：受到天助，無往不利。"
    ]
  },

  "001000": {
    name: "地山謙",
    guaText: "謙：亨，君子有終。",
    lineTexts: [
      "初六：謙謙君子，用涉大川，吉。",
      "六二：鳴謙，貞吉。",
      "九三：勞謙君子，有終吉。",
      "六四：無不利，撝謙。",
      "六五：不富以其鄰，利用侵伐，无不利。",
      "上六：鳴謙，利用行師征邑國。"
    ],
    lineNotes: [
      "初六：謙虛者可突破艱難，跨越大川而獲吉利。",
      "六二：以謙虛名聲立世，貞正則吉。",
      "九三：勤勞謙遜的君子必得善終。",
      "六四：處事謙和，無所不利。",
      "六五：不以富有自滿，勇於改革，反而無不利。",
      "上六：以謙德行師，平息外患最為適宜。"
    ]
  },

  "000100": {
    name: "雷地豫",
    guaText: "豫：利建侯，行師。",
    lineTexts: [
      "初六：鳴豫，凶。",
      "六二：介于石，不終日，貞吉。",
      "六三：盱豫，悔。遲有悔。",
      "九四：由豫，大有得。",
      "六五：貞疾，恒不死。",
      "上六：冥豫，凶。"
    ],
    lineNotes: [
      "初六：沉迷享樂而忘乎所以，會招來凶兆。",
      "六二：堅定如磐石，不到一日便得吉利。",
      "六三：過度期待而猶豫不決，會後悔。",
      "九四：適度享受且守正，可獲大利。",
      "六五：雖偶有疾患但保持正道不會有災。",
      "上六：沉迷在黑暗享樂中，會有凶禍。"
    ]
  },

  "100110": {
    name: "澤雷隨",
    guaText: "隨：元亨，利貞，無咎。",
    lineTexts: [
      "初九：官有渝，貞吉。出門交有功。",
      "六二：係小子，失丈夫。",
      "六三：係丈夫，失小子。隨有求得，利居貞。",
      "九四：隨有獲，貞凶。有孚在道，以明何咎？",
      "九五：孚于嘉，吉。",
      "上六：拘系之，乃從維之，王用亨于西山。"
    ],
    lineNotes: [
      "初九：職務有所變更，但守正可吉；外出與人合作有好成果。",
      "六二：跟隨細微小利而失去大方向。",
      "六三：把握正確的目標雖可能失去小利，但可獲得大成果。",
      "九四：跟隨有所得，但若固執過度則可能凶，誠信守道就無咎。",
      "九五：以真誠隨順善美之事，吉利。",
      "上六：雖有束縛，但最終仍能通達，並受尊崇。"
    ]
  },

  "011001": {
    name: "山風蠱",
    guaText: "蠱：元亨，利涉大川。先甲三日，後甲三日。",
    lineTexts: [
      "初六：幹父之蠱，有子考，無咎，厲終吉。",
      "九二：幹母之蠱，不可貞。",
      "九三：幹父之蠱，小有悔，無大咎。",
      "六四：裕父之蠱，往見吝。",
      "六五：幹父之蠱，用譽。",
      "上九：不事王侯，高尚其事。"
    ],
    lineNotes: [
      "初六：整治父輩留下的問題，有子能承擔則無咎，雖有險但終吉。",
      "九二：整治母輩留下的問題，若方式不正則不可。",
      "九三：治家務事稍有遺憾，但不會造成大禍。",
      "六四：縱容父輩的過失將招致羞愧。",
      "六五：以正道處理舊弊，可得美名。",
      "上九：不從世俗仕途，而走自己的高尚之道。"
    ]
  },

  "110000": {
    name: "地澤臨",
    guaText: "臨：元亨，利貞，至于八月有凶。",
    lineTexts: [
      "初九：咸臨，貞吉。",
      "九二：咸臨，吉无不利。",
      "六三：甘臨，無攸利；既憂之，无咎。",
      "六四：至臨，无咎。",
      "六五：知臨，大君之宜，吉。",
      "上六：敦臨，吉无咎。"
    ],
    lineNotes: [
      "初九：以誠意臨民，正而得到吉利。",
      "九二：以柔順誠心臨事，吉且無不利。",
      "六三：以甜言相待但無實質幫助，會生問題；若能憂思可免咎。",
      "六四：真誠關心地接近他人，沒有過失。",
      "六五：以智慧臨下，有君王之德，吉。",
      "上六：以厚道誠懇臨人，吉且無咎。"
    ]
  },

  "000011": {
    name: "風地觀",
    guaText: "觀：盥而不薦，有孚顒若。",
    lineTexts: [
      "初六：童觀，小人無咎，君子吝。",
      "六二：闚觀，利女貞。",
      "六三：觀我生，進退。",
      "六四：觀國之光，利用賓于王。",
      "九五：觀我生，君子無咎。",
      "上九：觀其生，君子无咎。"
    ],
    lineNotes: [
      "初六：以幼稚之心觀物，小人無害，君子則覺可恥。",
      "六二：從門縫觀察，視野有限，適合女子的柔貞之道。",
      "六三：觀察自身處境，應判斷進退。",
      "六四：觀察國家的盛德光輝，有利於朝見君王。",
      "九五：君子觀察自身、時勢與德行，無咎。",
      "上九：觀察眾生生命運行之道，君子無咎。"
    ]
  },

  "100101": {
    name: "火雷噬嗑",
    guaText: "噬嗑：亨，利用獄。",
    lineTexts: [
      "初九：屨校滅趾，无咎。",
      "六二：噬膚滅鼻，无咎。",
      "六三：噬腊肉遇毒；小吝，无咎。",
      "九四：噬乾胏，得金矢，利艱貞，吉。",
      "六五：噬乾肉，得黃金。貞厲，无咎。",
      "上九：何校滅耳；凶。"
    ],
    lineNotes: [
      "初九：咬斷小腳鐐，不會造成傷害，無咎。",
      "六二：咬去膚淺的罪過，不傷大體，無咎。",
      "六三：處理堅難之事可能遇到危害，但不會有大錯。",
      "九四：咬開堅難之物而得利器，經過艱難但結果吉。",
      "六五：處理案件得真金，即使過程嚴肅，最後無咎。",
      "上九：處置不當反遭傷害，如咬鐐而傷耳，凶。"
    ]
  },

  "101001": {
    name: "山火賁",
    guaText: "賁：亨。小利有攸往。",
    lineTexts: [
      "初九：賁其趾，舍車而徒。",
      "六二：賁其須。",
      "九三：賁如濡如，永貞吉。",
      "六四：賁如皤如，白馬翰如，匪寇婚媾。",
      "六五：賁于丘園，束帛戔戔，吝，終吉。",
      "上九：白賁，无咎。"
    ],
    lineNotes: [
      "初九：裝飾腳趾，捨去車乘徒步而行，象徵簡樸。",
      "六二：適度修飾外表即可。",
      "九三：外表柔和潤澤，長久守正可吉。",
      "六四：白馬前來並非敵人，而是求婚的使者。",
      "六五：以微薄禮物行事，雖有遺憾但終吉。",
      "上九：以純白為飾，樸素自然，無咎。"
    ]
  },

  "000001": {
    name: "山地剝",
    guaText: "剝：不利有攸往。",
    lineTexts: [
      "初六：剝床以足，蔑貞凶。",
      "六二：剝床以辨，蔑貞凶。",
      "六三：剝之无咎。",
      "六四：剝床以膚，凶。",
      "六五：貫魚，以宮人寵，无不利。",
      "上六：碩果不食，君子得舆，小人剝廬。"
    ],
    lineNotes: [
      "初六：從床腳被剝壞起，象徵根基破損，凶。",
      "六二：床板也被剝壞，凶象更深。",
      "六三：主動削去不正之物，可無咎。",
      "六四：連床面都削壞，危險加劇，凶。",
      "六五：宮人得寵可如連貫之魚，象團結而無不利。",
      "上六：僅剩大果，君子得民，小人卻失其家。"
    ]
  },

  "100000": {
    name: "地雷復",
    guaText: "復：亨。出入无疾，朋來无咎。反復其道，七日來復。",
    lineTexts: [
      "初九：不遠復，无祗悔，元吉。",
      "六二：休復，吉。",
      "六三：頻復，厲无咎。",
      "六四：中行獨復。",
      "六五：敦復，无悔。",
      "上六：迷復，凶，有災惑。"
    ],
    lineNotes: [
      "初九：偏離不遠，很快就能回頭，無悔且吉。",
      "六二：休息後回復正道，吉。",
      "六三：多次反覆回頭，雖有險但仍無大咎。",
      "六四：在中正之道上獨自返回，象徵正確但孤獨。",
      "六五：以厚道方式回復，可無悔。",
      "上六：迷失方向未能回頭，終有凶險與災禍。"
    ]
  },

  "100111": {
    name: "天雷無妄",
    guaText: "無妄：元亨，利貞。其匪正有眚，不利有攸往。",
    lineTexts: [
      "初九：無妄，往吉。",
      "六二：不耕獲，不菑畬，則利有攸往。",
      "六三：無妄之災，或繫之牛，行人之得，邑人之災。",
      "九四：可貞，无咎。",
      "九五：無妄之疾，勿藥有喜。",
      "上九：無妄，行有眚，无攸利。"
    ],
    lineNotes: [
      "初九：保持真誠無欺的心前行，可得吉利。",
      "六二：不刻意耕耘也能有收穫，象徵順勢而為反得利益。",
      "六三：遭遇無妄之災，如牛被繫被人牽走，是村民的損失；比喻意外損害。",
      "九四：能堅守正道，不會有過失。",
      "九五：遇病勿亂用藥，順其自然反能逢喜。",
      "上九：若行動不正，就算無妄之心也會受害。"
    ]
  },

  "111001": {
    name: "山天大畜",
    guaText: "大畜：利貞。不家食，吉，利涉大川。",
    lineTexts: [
      "初九：有厲利己。",
      "九二：輿說輹。",
      "九三：良馬逐，利艱貞。日閑輿衛，利有攸往。",
      "六四：童牛之牿，元吉。",
      "六五：豶豕之牙，吉。",
      "上九：何天之衢，亨。"
    ],
    lineNotes: [
      "初九：有危險，但能自利並保全自己。",
      "九二：車子輪軸脫落，象徵暫時停滯不可前進。",
      "九三：好馬奔跑，需艱苦鍛鍊守正，才能有所進展。",
      "六四：以木柵養幼牛，使其安定，象徵培育根基，極吉。",
      "六五：閹豬之牙無害，象徵溫順中正，吉。",
      "上九：直通天道的大路，象徵大通無阻，順遂亨通。"
    ]
  },

  "100001": {
    name: "山雷頤",
    guaText: "頤：貞吉。觀頤，自求口實。",
    lineTexts: [
      "初九：舍爾靈龜，觀我朵頤，凶。",
      "六二：顛頤，拂經，于丘頤，征吉。",
      "六三：拂頤，貞凶，十年勿用，无攸利。",
      "六四：顛頤吉，虎視眈眈，其欲逐逐。",
      "六五：拂經，居貞吉，不可涉大川。",
      "上九：由頤，厲吉，利涉大川。"
    ],
    lineNotes: [
      "初九：放棄自己的靈龜而羨慕外人之食，是凶象。",
      "六二：顛倒飲食方式，雖偏離常道，但反而前往可得吉。",
      "六三：違逆正道，固守會凶，十年不宜妄動。",
      "六四：翻轉飲食方式反得吉，如猛虎注視，欲求強烈。",
      "六五：雖違逆經常之道，但仍吉；但不可冒險涉大川。",
      "上九：依正道養生，雖有危險但終吉，可行大事。"
    ]
  },

  "011110": {
    name: "澤風大過",
    guaText: "大過：棟橈，利有攸往，亨。",
    lineTexts: [
      "初六：藉用白茅，無咎。",
      "九二：枯楊生稊，老夫得其女妻，无不利。",
      "九三：棟橈，凶。",
      "九四：棟隆，吉；有它吝。",
      "九五：枯楊生華，老妇得其士夫，无咎无譽。",
      "上六：過涉滅頂，凶，无咎。"
    ],
    lineNotes: [
      "初六：以白茅鋪底保護根基，象徵謹慎得宜，無咎。",
      "九二：枯木發芽，象徵重新生機，老者娶少妻，雖奇但吉。",
      "九三：大樑彎曲，象徵負擔過重，凶。",
      "九四：大樑挺立，吉，但若做他事會有遺憾。",
      "九五：枯木開花，雖不真實但象徵美意，無咎也無名。",
      "上六：涉水過深滅頂，凶，但因是不得已所以無咎。"
    ]
  },

  "010010": {
    name: "坎為水",
    guaText: "坎：習坎，有孚，維心亨；行有尚。",
    lineTexts: [
      "初六：習坎，入于坎窞，凶。",
      "九二：坎有險，求小得。",
      "六三：來之坎坎，險且枕；入于坎窞，勿用。",
      "六四：樽酒簋貳，用缶，納約自牖，終无咎。",
      "九五：坎不盈，只既平，无咎。",
      "上六：係用徽纆，寘于叢棘，三歲不得，凶。"
    ],
    lineNotes: [
      "初六：重複陷入陷阱深坑，凶。",
      "九二：有危險，但求小利可得。",
      "六三：來回陷於危險之中，不宜再冒險。",
      "六四：用簡單禮品行禮，雖節約但誠意足，終能無咎。",
      "九五：危險未滿，剛得以平衡，無咎。",
      "上六：像是被繩捆綁在荊棘裡，長久不得脫，凶。"
    ]
  },

  "101101": {
    name: "離為火",
    guaText: "離：利貞，亨。畜牝牛吉。",
    lineTexts: [
      "初九：履錯然，敬之无咎。",
      "六二：黃離，元吉。",
      "九三：日昃之離，不鼓缶而歌，则大耋之嗟，凶。",
      "九四：突如其來如，焚如，死如，棄如。",
      "六五：出涕沱若，戚嗟若，吉。",
      "上九：王用出征，有嘉折首，獲匪其醜，无咎。"
    ],
    lineNotes: [
      "初九：小小錯失，保持敬慎即可無咎。",
      "六二：黃色象徵中正，光明正大，大吉。",
      "九三：如夕陽西下之火，心境消沉，凶。",
      "九四：火勢猛烈，突然而來，焚盡一切，是危象。",
      "六五：悲泣後能轉吉，象徵情緒淨化。",
      "上九：出征能成功，雖斬敵首但非惡意，無咎。"
    ]
  },

  "001110": {
    name: "澤山咸",
    guaText: "咸：亨，利貞，取女吉。",
    lineTexts: [
      "初六：咸其拇。",
      "六二：咸其腓，凶。居吉。",
      "九三：咸其股，執其隨，往吝。",
      "九四：貞吉悔亡，憧憧往來，朋從爾思。",
      "九五：咸其脢，无悔。",
      "上六：咸其輔、頰、舌。"
    ],
    lineNotes: [
      "初六：感應從腳趾開始，象徵感情萌芽。",
      "六二：僅感於小事，貿然行動凶；安守本位則吉。",
      "九三：情緒受股部牽動，跟隨欲望行事會有遺憾。",
      "九四：感應互通則吉，徘徊往來終能和合。",
      "九五：感應到背脊，心意誠實無悔。",
      "上六：感應深入口舌，象徵情感交流完全敞開。"
    ]
  },

  "011100": {
    name: "雷風恆",
    guaText: "恆：亨，无咎，利貞，利有攸往。",
    lineTexts: [
      "初六：浚恆，貞凶，无攸利。",
      "九二：悔亡。",
      "九三：不恆其德，或承之羞，貞吝。",
      "九四：田无禽。",
      "六五：恆其德，貞婦人吉，夫子凶。",
      "上九：振恆，凶。"
    ],
    lineNotes: [
      "初六：過度急進破壞長久之道，凶。",
      "九二：能守恆常之道，悔恨消失。",
      "九三：德行不恆會蒙羞，即使守正也有遺憾。",
      "九四：田中無禽，象徵行事不得其時。",
      "六五：守恆常之道於婦人吉，但男子若固執則凶。",
      "上九：震動過度，偏離恆道，凶。"
    ]
  },

  "001000": {
    name: "天山遯",
    guaText: "遯：亨，小利貞。",
    lineTexts: [
      "初六：遯尾，厲。勿用有攸往。",
      "六二：執之用黃牛之革，莫之勝說。",
      "九三：係遯，有疾厲，畜臣妾吉。",
      "九四：好遯，君子吉，小人否。",
      "九五：嘉遯，貞吉。",
      "上九：肥遯，无不利。"
    ],
    lineNotes: [
      "初六：像尾巴逃不掉，被逼之危，不宜前往。",
      "六二：如黃牛皮綁牢，象徵退守不動，最為安全。",
      "九三：想退卻又被牽制，內心不安，但能安分則吉。",
      "九四：懂得退避之道，君子吉，小人卻做不到。",
      "九五：退得好、退得合宜，守正吉。",
      "上九：能從容退避，無不吉利。"
    ]
  },

  "000100": {
    name: "雷天大壯",
    guaText: "大壯：利貞。",
    lineTexts: [
      "初九：壯于趾，征凶，有孚。",
      "九二：貞吉。",
      "九三：小人用壯，君子用罔，貞厲；羝羊觸藩，羸其角。",
      "九四：貞吉悔亡；藩決不羸。",
      "九五：喪羊于易，无悔。",
      "上六：羝羊觸藩，不能退，不能遂，无攸利。"
    ],
    lineNotes: [
      "初九：以腳先衝，貿然前進凶；有誠信可補救。",
      "九二：守正則吉。",
      "九三：小人逞強，君子不用蠻力；如公羊觸籬柵卡住。",
      "九四：守正能解困，不再受阻。",
      "九五：羊走失了也無悔，象徵順勢放下反而好。",
      "上六：像公羊被卡住，進退不得，不利。"
    ]
  },

  "110000": {
    name: "火地晉",
    guaText: "晉：康侯用錫馬蕃庶，晝日三接。",
    lineTexts: [
      "初六：晉如摧如，貞吉。罔孚，裕无咎。",
      "六二：晉如愁如，貞吉。受茲介福，于其王母。",
      "六三：眾允，悔亡。",
      "九四：晉如鼫鼠，貞厲。",
      "六五：悔亡，失得勿恤，往吉无不利。",
      "上九：晉其角，維用伐邑，厲吉无咎，貞吝。"
    ],
    lineNotes: [
      "初六：前進好像受阻，但守正吉；雖無人信也能安然無咎。",
      "六二：晉升中帶憂，但能得大福如受祖母庇佑。",
      "六三：眾人同意，悔恨消失。",
      "九四：像鼫鼠偷晉，雖有進展但陰險有危。",
      "六五：悔亡；放下得失，往之大吉。",
      "上九：前進過度如角突出，伐城有功但仍有危厲。"
    ]
  },

  "000011": {
    name: "地火明夷",
    guaText: "明夷：利艱貞。",
    lineTexts: [
      "初九：明夷于飛，垂其翼；君子于行，三日不食，有攸往，主人有言。",
      "六二：明夷，夷于左股，用拯馬壯，吉。",
      "九三：明夷于南狩，得其大首；不可疾貞。",
      "六四：入于左腹，獲明夷之心，于出門庭。",
      "六五：箕子之明夷，利貞。",
      "上六：不明，晦；初登于天，後入于地。"
    ],
    lineNotes: [
      "初九：光明被傷，如飛鳥折翼；君子受難仍堅行。",
      "六二：光明受傷到腿，但有強馬救助，吉。",
      "九三：在黑暗中仍能斬獲大首，但不可太急進。",
      "六四：深入黑暗核心，理解黑暗本質，方能出難。",
      "六五：如箕子之忍辱負重，守正即吉。",
      "上六：完全陷於黑暗，像先升天後沒入地底。"
    ]
  },

  "100011": {
    name: "風火家人",
    guaText: "家人：利女貞。",
    lineTexts: [
      "初九：閑有家，悔亡。",
      "六二：無攸遂，在中饋，貞吉。",
      "九三：家人嗃嗃，悔厲吉；婦子嘻嘻，終吝。",
      "六四：富家，大吉。",
      "九五：王假有家，勿恤，吉。",
      "上九：有孚威如，終吉。"
    ],
    lineNotes: [
      "初九：能自我節制，家道安寧，悔恨消除。",
      "六二：安守本分，掌家飲食，守正則吉。",
      "九三：家人嚴肅有紀律反而吉；若只嬉笑終會有過。",
      "六四：家道富足，大吉。",
      "九五：君王治理國家如治家，不必憂慮，吉。",
      "上九：以誠信立威，家道終吉。"
    ]
  },

  "110011": {
    name: "火澤睽",
    guaText: "睽：小事吉。",
    lineTexts: [
      "初九：悔亡；喪馬勿逐，自復。",
      "九二：遇主于巷，无咎。",
      "六三：見輿曳，其牛掣；其人天且劓，无初有終。",
      "九四：睽孤，遇元夫，交孚，厲无咎。",
      "六五：悔亡；厥宗噬膚，往何咎？",
      "上九：睽孤，見豕負塗，載鬼一車，先張之弧，後說之弧，匪寇婚媾，往遇雨則吉。"
    ],
    lineNotes: [
      "初九：悔亡；失馬不必追，會自己回來。",
      "九二：在巷中遇到正主，無咎。",
      "六三：看到車拖行、牛受拉扯，象徵種種不順；但最後能好轉。",
      "九四：孤立之時遇貴人，互信則無咎。",
      "六五：咬破皮膚般的深入理解，往之無咎。",
      "上九：雖見怪異之象，也不是敵寇而是婚媾之兆；遇雨大吉。"
    ]
  },

  "001010": {
    name: "水山蹇",
    guaText: "蹇：利西南，不利東北；利見大人，貞吉。",
    lineTexts: [
      "初六：往蹇，來譽。",
      "六二：王臣蹇蹇，匪躬之故。",
      "九三：往蹇來反。",
      "六四：往蹇來連。",
      "九五：大蹇，朋來。",
      "上六：往蹇，來碩；吉，利見大人。"
    ],
    lineNotes: [
      "初六：前往艱難，退回反得稱讚。",
      "六二：臣子陷艱難，非為己私。",
      "九三：進退不得，還是退回較好。",
      "六四：向前難，退回可得依靠。",
      "九五：大難當頭，朋友來相助。",
      "上六：前行難，退回有大收穫；宜見大人而吉。"
    ]
  },

  "010100": {
    name: "雷水解",
    guaText: "解：利西南；无所往，其來復吉；有攸往，夙吉。",
    lineTexts: [
      "初六：无咎。",
      "九二：田獲三狐，得其小，凶。",
      "六三：負且乘，致寇至，貞吝。",
      "九四：解而拇，往有疾，厲，吝。",
      "六五：君子維有解，吉；有孚于小人。",
      "上六：公用射隼，于高墉之上，獲之，无不利。"
    ],
    lineNotes: [
      "初六：無咎。",
      "九二：捕到三隻狐狸，象徵貪小失大，凶。",
      "六三：背著又乘車，太過招人搶奪，凶。",
      "九四：剛解除束縛便急於前往，會有病厲吝。",
      "六五：君子能解難，誠信連小人都感化，吉。",
      "上六：在高牆上射到隼鳥，象徵解除最大之患，皆大吉。"
    ]
  },

  "100100": {
    name: "山澤損",
    guaText: "損：有孚，元吉，无咎，可貞，利有攸往。曷之用？二簋可用享。",
    lineTexts: [
      "初九：己事遄往，无咎；酌損之。",
      "九二：利貞，征凶；弗損，益之。",
      "六三：三人行，則損一人；一人行，則得其友。",
      "六四：損其疾，使遄有喜，无咎。",
      "六五：或益之十朋之龜，弗克違，元吉。",
      "上九：弗損，益之；无咎，貞吉，利有攸往，得臣无家。"
    ],
    lineNotes: [
      "初九：快去做該做的事，無咎；懂得適度減損反而有利。",
      "九二：利於守正，若再冒進會凶；不宜過度損，反需補益。",
      "六三：三人同行會有人被排除；單獨行動反而能遇到真正夥伴。",
      "六四：減少病根，加速調整，可得喜訊。",
      "六五：有人送來極珍貴的龜卜禮物，無法拒絕，吉。",
      "上九：不損反益，守正吉，利往前；臣下忠心如家。"
    ]
  },

  "001001": {
    name: "風雷益",
    guaText: "益：利有攸往，利涉大川。",
    lineTexts: [
      "初九：利用為大作，元吉，无咎。",
      "六二：或益之十朋之龜，弗克違，永貞吉；王用享于帝，吉。",
      "六三：益之用凶事，无咎。有孚，中行告公用圭。",
      "六四：中行告公從，利用為依遷國。",
      "九五：有孚惠心，勿問元吉；有孚惠我德。",
      "上九：莫益之，或擊之，立心勿恒，凶。"
    ],
    lineNotes: [
      "初九：做大事有利，極吉。",
      "六二：受益如得珍龜，無法拒絕；長守正吉。",
      "六三：從凶厄中增益，因誠信而無咎。",
      "六四：消息傳達後得到支持，可遷國立基礎。",
      "九五：誠心施惠，不問而吉；德行受人信任。",
      "上九：無從受益反受打擊，心不穩定會凶。"
    ]
  },

  "111010": {
    name: "澤天夬",
    guaText: "夬：揚于王庭，孚號，有厲，告自邑，不利即戎，利有攸往。",
    lineTexts: [
      "初九：壯于前趾，往不勝為咎。",
      "九二：惕號，莫夜有戎，勿恤。",
      "九三：壯于頄，有凶；君子夬夬，獨行，遇雨若濡，有慍无咎。",
      "九四：臀无膚，其行次且；牽羊悔亡，聞言不信。",
      "九五：莧陸夬夬，中行无咎。",
      "上六：无號，終有凶。"
    ],
    lineNotes: [
      "初九：以趾逞強，往必失敗。",
      "九二：夜有軍警戒，但不必恐慌。",
      "九三：以臉部逞強凶；君子果決獨行，遇雨小惱但無咎。",
      "九四：屁股皮破難行；牽羊象順從，悔亡，但聽不進建議。",
      "九五：如莧陸植物般柔中有決，居中行則無咎。",
      "上六：不敢發號施令，終致凶。"
    ]
  },

  "010111": {
    name: "天風姤",
    guaText: "姤：女壯，勿用取女。",
    lineTexts: [
      "初六：繫于金柅，貞吉；有攸往，見凶；羸豕孚蹢躅。",
      "九二：包有魚，无咎；不利賓。",
      "九三：臀无膚，其行次且；厲，无大咎。",
      "九四：包无魚，起凶。",
      "九五：以杞包瓜，含章，有隕自天。",
      "上九：姤其角，吝；无咎。"
    ],
    lineNotes: [
      "初六：如金柅固定不動，守正吉；若妄動有凶。",
      "九二：袋中有魚，比喻有內涵，無咎；但不宜做客。",
      "九三：屁股皮破難行，有危險但無大害。",
      "九四：袋內無魚，象徵空虛，易招災。",
      "九五：用杞木包瓜，內藏文采，但有天災降臨之象。",
      "上九：被角牽絆，窒礙不通，雖有吝但無咎。"
    ]
  },

  "011000": {
    name: "澤地萃",
    guaText: "萃：亨；王假有廟，利見大人，亨，利貞；用大牲吉，利有攸往。",
    lineTexts: [
      "初六：有孚不終，乃亂乃萃，若號，一握為笑，勿恤，往无咎。",
      "六二：引吉，无咎；孚乃利用禴。",
      "六三：萃如，嗟如，无攸利；往无咎，小吝。",
      "九四：大吉，无咎。",
      "九五：萃有位，无咎；匪孚，元永貞，悔亡。",
      "上六：齎咨涕洟，无咎。"
    ],
    lineNotes: [
      "初六：原本誠信後來混亂，但只要真心呼喊仍可化解。",
      "六二：引導群眾向吉處，無咎；誠信可行簡約祭禮。",
      "六三：聚合之中嘆息不已，無利；但往前則無咎。",
      "九四：大吉無咎。",
      "九五：居中有位無咎；需保持長久誠信，悔亡。",
      "上六：哭泣後釋懷，無咎。"
    ]
  },

  "000110": {
    name: "地風升",
    guaText: "升：元亨，用見大人，勿恤，南征吉。",
    lineTexts: [
      "初六：允升，大吉。",
      "九二：孚乃利用禴，无咎。",
      "九三：升虛邑。",
      "六四：王用亨于岐山，吉，无咎。",
      "六五：貞吉，升階。",
      "上六：冥升，利于不息之貞。"
    ],
    lineNotes: [
      "初六：真誠上升，大吉。",
      "九二：誠信使得簡祭也無咎。",
      "九三：上升到空城，比喻努力未遇對應者。",
      "六四：王在岐山行大祭，吉。",
      "六五：守正吉，如登階而上。",
      "上六：在黑暗中努力上升，利於不息堅持。"
    ]
  },

  "010001": {
    name: "澤水困",
    guaText: "困：亨，貞，大人吉，无咎，有言不信。",
    lineTexts: [
      "初六：臀困于株木，入于幽谷，三歲不覿。",
      "九二：困于酒食，朱紱方來；利用亨祀，征凶，无咎。",
      "六三：困于石，據于蒺藜；入于其宮，不見其妻，凶。",
      "九四：來徐徐，困于金車，吝，有終。",
      "九五：劓刖，困于赤紱；乃徐有說，利用祭祀。",
      "上六：困于葛藟，于臲卼，曰動悔有悔；征吉。"
    ],
    lineNotes: [
      "初六：像被卡在木樁旁，進入幽谷長久困頓。",
      "九二：困於宴飲，但貴人來解困；可祭祀但不可遠行。",
      "六三：困於石蒺藜，如回家不見妻子，凶。",
      "九四：行動遲緩被金車所困，有吝但終會好。",
      "九五：受刑般困厄，但慢慢能化解，可藉祭祀吉。",
      "上六：被葛藤困住，動則悔；但往前反而吉。"
    ]
  },

  "100010": {
    name: "水風井",
    guaText: "井：改邑不改井；无喪无得，往來井井。",
    lineTexts: [
      "初六：井泥不食；舊井无禽。",
      "九二：井谷射鮒，甕敝漏。",
      "九三：井渫不食，為我民恻；可用汲，王明並受其福。",
      "六四：井甃，无咎。",
      "九五：井洌，寒泉食。",
      "上六：井收，勿幕；有孚元吉。"
    ],
    lineNotes: [
      "初六：井水混濁不能食；舊井也無鳥棲息。",
      "九二：井枯只能射到小魚，水甕破漏，象徵貧乏。",
      "九三：井清卻未汲用，使人憐惜；若用則王者得福。",
      "六四：修補井壁，無咎。",
      "九五：井水清洌可飲，極佳。",
      "上六：井水豐收，不必遮蓋；誠信則元吉。"
    ]
  },

  "110101": {
    name: "澤火革",
    guaText: "革：己日乃孚，元亨，利貞，悔亡。",
    lineTexts: [
      "初九：鞏用黃牛之革。",
      "六二：己日乃革之，征吉，无咎。",
      "九三：征凶，貞厲；革言三就，有孚。",
      "九四：悔亡，有孚改命，吉。",
      "九五：大人虎變，未占有孚。",
      "上六：君子豹變，小人革面，征凶，居貞吉。"
    ],
    lineNotes: [
      "初九：像用黃牛皮牢牢繫住，象徵改革需先穩固根本。",
      "六二：在適當時機變革，前往吉且無咎。",
      "九三：急進改革易凶；需三思後行，方能取信。",
      "九四：悔恨消失，改革得人心，吉。",
      "九五：大人變革如虎換紋，威而有信，不必占卜。",
      "上六：君子革如豹變，小人僅改表面；妄動凶，安守正則吉。"
    ]
  },

  "101011": {
    name: "火風鼎",
    guaText: "鼎：元吉，亨。",
    lineTexts: [
      "初六：鼎顛趾，利出否；得妾以其子，无咎。",
      "九二：鼎有實，我仇有疾，不我能即，吉。",
      "九三：鼎耳革，其行塞，雉膏不食；方雨，虧悔終吉。",
      "九四：鼎折足，覆公餗；其形渥，凶。",
      "九五：鼎黃耳，金鉉，利貞。",
      "上九：鼎玉鉉，大吉，无不利。"
    ],
    lineNotes: [
      "初六：鼎翻腳向上，能倒出污物；象徵清理後無咎。",
      "九二：鼎內豐實，敵人病弱不能害我，吉。",
      "九三：鼎耳換新，但行動受阻；久後有雨，悔恨消失而吉。",
      "九四：鼎足折斷、食物傾覆，凶象。",
      "九五：鼎耳呈黃、鉉為金，象徵中正而吉。",
      "上九：鼎鉉為玉，最高貴之象，大吉無不利。"
    ]
  },

  "100000": {
    name: "震為雷",
    guaText: "震：亨；震來虩虩，後笑言啞啞，吉。",
    lineTexts: [
      "初九：震來虩虩，後笑言啞啞，吉。",
      "六二：震來厲，億喪貝，躋于九陵；勿逐，七日得。",
      "六三：震蘇蘇，震行无眚。",
      "九四：震遂泥。",
      "六五：震往來厲，億無喪，有事。",
      "上六：震索索，視矍矍，征凶；震不于其躬，于其鄰，无咎；婚媾有言。"
    ],
    lineNotes: [
      "初九：雷開始令人驚恐，但最後化為笑，吉。",
      "六二：雷來有危險，損失財物；但不追逐，七日可回復。",
      "六三：驚懼後逐漸安定，無害。",
      "九四：震動後陷入泥濘，象徵受阻。",
      "六五：震動往來有危，但不至喪失，宜處理正事。",
      "上六：過於驚恐，若災不及己及鄰則無咎；婚姻有口舌。"
    ]
  },

  "000101": {
    name: "艮為山",
    guaText: "艮：艮其背，不獲其身；行其庭，不見其人，无咎。",
    lineTexts: [
      "初六：艮其趾，无咎；利永貞。",
      "六二：艮其腓，不拯其隨；其心不快。",
      "九三：艮其限，列其夤，厲薰心。",
      "六四：艮其身，无咎。",
      "六五：艮其輔，言有序，悔亡。",
      "上九：敦艮，吉。"
    ],
    lineNotes: [
      "初六：止於腳趾，無咎，宜久守正。",
      "六二：止於小腿，不能制止整體，心難安。",
      "九三：止於腰身，身心皆受壓，危厲。",
      "六四：止於全身，無咎。",
      "六五：止於口輔，使言語有序，悔恨消失。",
      "上九：止之以厚道，吉。"
    ]
  },

  "110000": {
    name: "風山漸",
    guaText: "漸：女歸吉，利貞。",
    lineTexts: [
      "初六：鴻漸于干，小子厲，有言，无咎。",
      "六二：鴻漸于磐，飲食衎衎，吉。",
      "九三：鴻漸于陸，夫征不復，婦孕不育，凶；利御寇。",
      "六四：鴻漸于木，或得其桷，无咎。",
      "九五：鴻漸于陵，婦三歲不孕，終莫之勝，吉。",
      "上九：鴻漸于逵，其羽可用為儀，吉。"
    ],
    lineNotes: [
      "初六：大雁漸至岸邊，小者危險，但終無咎。",
      "六二：大雁到岩盤，飲食安樂，吉。",
      "九三：大雁到陸地，丈夫出征不返，妻子懷孕不育，凶；但利於禦敵。",
      "六四：大雁到樹上，可能停在橫木上，無咎。",
      "九五：大雁到丘陵，雖久不孕終吉。",
      "上九：大雁至大道，羽毛可作禮器，吉。"
    ]
  },

  "000110": {
    name: "雷澤歸妹",
    guaText: "歸妹：征凶，无攸利。",
    lineTexts: [
      "初九：歸妹以娣，跛能履，征吉。",
      "九二：眇能視，利幽人之貞。",
      "六三：歸妹以須，反歸以娣。",
      "九四：歸妹愆期，遲歸有時。",
      "六五：帝乙歸妹，其君之袂不如其娣之袂良；月幾望，吉。",
      "上六：女承筐无實，士刲羊无血，无攸利。"
    ],
    lineNotes: [
      "初九：以妾身出嫁，如跛腳能行，象徵能克服限制而吉。",
      "九二：眼有病卻能見，象徵內明；利於幽靜守貞。",
      "六三：以等待而嫁，最後又做妾回來。",
      "九四：婚期拖延，但終能如期。",
      "六五：帝乙嫁女，妾衣比主衣更美；近望月圓，吉。",
      "上六：榖筐無實、羊無血，象徵徒具形式，无利。"
    ]
  },

  "010011": {
    name: "雷火豐",
    guaText: "豐：亨，王假之；勿憂，宜日中。",
    lineTexts: [
      "初九：遇其配主，雖旬无咎；往有尚。",
      "六二：豐其蔀，日中見斗；往得疑疾，有孚發若，吉。",
      "九三：豐其沛，日中見沬；折其右肱，无咎。",
      "九四：豐其蔀，日中見斗；遇其夷主，吉。",
      "六五：來章，有慶譽，吉。",
      "上六：豐其屋，蔀其家，闚其戶；闃其无人，三歲不覿，凶。"
    ],
    lineNotes: [
      "初九：遇到真正能配合的人，即使拖延也無咎，前往有利。",
      "六二：雖富盛但被覆蓋，日中見星象徵不正常；誠信能化疑成吉。",
      "九三：豐盛但過度，日中見黑影；像折臂雖痛但無咎。",
      "九四：同六二象，遇到同道之人而吉。",
      "六五：文采來到，得喜與名譽，吉。",
      "上六：富盛到過度遮蔽，屋中無人，三年不見，凶。"
    ]
  },

  "110100": {
    name: "火山旅",
    guaText: "旅：小亨，旅貞吉。",
    lineTexts: [
      "初六：旅瑣瑣，斯其所取災。",
      "六二：旅即次，懷其資，得童僕貞。",
      "九三：旅焚其次，喪其童僕；貞厲。",
      "九四：旅于處，得其資斧，我心不快。",
      "六五：射雉，一矢亡；終以譽命。",
      "上九：鳥焚其巢，旅人先笑後號咷；喪牛于易，凶。"
    ],
    lineNotes: [
      "初六：旅行時小心眼、自私，反招災。",
      "六二：旅居有落腳處，資財尚在，伙伴忠誠，吉。",
      "九三：旅行被火燒，失去伙伴，雖守正但危。",
      "九四：旅居找到資糧工具，但心仍鬱悶。",
      "六五：射雉時失去一箭，最後反得好名聲。",
      "上九：鳥巢被燒、旅人先笑後哭，象徵大失；失牛凶。"
    ]
  },

  "110110": {
    name: "巽為風",
    guaText: "巽：小亨，利有攸往，利見大人。",
    lineTexts: [
      "初六：進退，利武人之貞。",
      "九二：巽在床下，用史巫紛若，吉无咎。",
      "九三：頻巽，吝。",
      "六四：悔亡，田獲三品。",
      "九五：貞吉悔亡，无不利；无初有終，先庚三日，後庚三日，吉。",
      "上九：巽在床下，喪其資斧，貞凶。"
    ],
    lineNotes: [
      "初六：進退未定，需如武人守正則利。",
      "九二：謙下之姿，如在床下；以史巫占法反得吉。",
      "九三：過度謙遜、反覆退縮會有吝。",
      "六四：悔恨消失，如田獲三等物，收穫豐富。",
      "九五：守正吉且悔亡，無不利；如庚日前後三日之慎重，吉。",
      "上九：謙遜過度至匍匐，連資財工具都喪失，凶。"
    ]
  },

  "011011": {
    name: "兌為澤",
    guaText: "兌：亨，利貞。",
    lineTexts: [
      "初九：和兌，吉。",
      "九二：孚兌，吉；悔亡。",
      "六三：來兌，凶。",
      "九四：商兌未寧，介疾有喜。",
      "九五：孚于剝，有厲。",
      "上六：引兌。"
    ],
    lineNotes: [
      "初九：以和善之心互悅，吉。",
      "九二：以誠信相悅，吉且悔亡。",
      "六三：迎合於外而失本心，凶。",
      "九四：兌悅未安，會有小病，但終有喜。",
      "九五：在剝損中求悅，有危險。",
      "上六：受人牽引而悅，易失自主。"
    ]
  },

  "010011": {
    name: "風水渙",
    guaText: "渙：亨；王假有廟，利涉大川，利貞。",
    lineTexts: [
      "初六：用拯馬壯，吉。",
      "九二：渙奔其機，悔亡。",
      "六三：渙其躬，无悔。",
      "六四：渙其群，元吉；渙有丘，匪夷所思。",
      "九五：渙汗其大號，渙王居，无咎。",
      "上九：渙其血，去逖出，无咎。"
    ],
    lineNotes: [
      "初六：以強壯之馬救散亂，吉。",
      "九二：迅速離開危地，悔亡。",
      "六三：能讓自身離散於危局之外，無悔。",
      "六四：令群體散而後聚，大吉；如高丘之勢難以言喻。",
      "九五：國王發佈大號令，使眾心渙散再聚，無咎。",
      "上九：散去血光之災，遠離危險，無咎。"
    ]
  },

  "001010": {
    name: "水澤節",
    guaText: "節：亨；苦節不可貞。",
    lineTexts: [
      "初九：不出戶庭，无咎。",
      "九二：不出門庭，凶。",
      "六三：不節若，則嗟若，无咎。",
      "六四：安節，亨。",
      "九五：甘節，吉；往有尚。",
      "上六：苦節，貞凶；悔亡。"
    ],
    lineNotes: [
      "初九：節制自守，不離家門，無咎。",
      "九二：節制過度反成凶。",
      "六三：不能節制會嘆息，但不會有咎。",
      "六四：安於節度而通達，亨。",
      "九五：節制中有甘美，吉，行之更佳。",
      "上六：過度苦節則凶，但悔能消。"
    ]
  },

  "011100": {
    name: "風澤中孚",
    guaText: "中孚：豚魚吉，利涉大川，利貞。",
    lineTexts: [
      "初九：虞吉，有它不燕。",
      "九二：鳴鶴在陰，其子和之；我有好爵，吾與爾靡之。",
      "六三：得敵，或鼓或罷，或泣或歌。",
      "六四：月幾望，馬匹亡，无咎。",
      "九五：有孚攣如，无咎。",
      "上九：翰音登于天，貞凶。"
    ],
    lineNotes: [
      "初九：虞人信實而吉，但不可貪求其他。",
      "九二：鶴鳴於陰，子聲和之；象徵心誠則自然感應。",
      "六三：面對敵人，忽戰忽止、哭笑無常，心不定。",
      "六四：月近滿時，馬失而無咎，象徵放下反吉。",
      "九五：誠信如繫繩緊扣，不失，不咎。",
      "上九：高聲張揚，太過則凶。"
    ]
  },

  "001011": {
    name: "雷山小過",
    guaText: "小過：亨；利貞。可小事，不可大事；飛鳥遺之音，不宜上宜下，大吉。",
    lineTexts: [
      "初六：飛鳥以凶。",
      "六二：過其祖，遇其妣；不及其君，遇其臣，无咎。",
      "九三：弗過防之，從或戕之，凶。",
      "九四：无咎，弗過遇之，往厲必戒，勿用永貞。",
      "六五：宛宛，厲，无咎。",
      "上六：弗遇過之；飛鳥離之，凶，是謂災眚。"
    ],
    lineNotes: [
      "初六：像飛鳥遭凶象，不吉。",
      "六二：走得太過而遇祖妣，未及君而遇臣，無咎。",
      "九三：不防範過度者，會被其所害，凶。",
      "九四：無咎；不過度反而遇其時，但行動要戒慎。",
      "六五：彎曲柔順，有危但無咎。",
      "上六：沒有遇到反而越過頭，如飛鳥離散，凶。"
    ]
  },

  "010101": {
    name: "水火既濟",
    guaText: "既濟：亨小，利貞；初吉終亂。",
    lineTexts: [
      "初九：曳其輪，濡其尾，无咎。",
      "六二：婦喪其茀；勿逐，七日得。",
      "九三：高宗伐鬼方，三年克之，小人勿用。",
      "六四：繻有衣袽，終日戒。",
      "九五：東鄰殺牛，不如西鄰之禴祭；實受其福。",
      "上六：濡其首，厲。"
    ],
    lineNotes: [
      "初九：車輪被拖、尾巴沾濕，小小阻礙但無咎。",
      "六二：婦人遺失禮冠，不必追，七日自回。",
      "九三：如高宗伐鬼方，三年才克；小人不可用。",
      "六四：如衣服破損，整日警戒。",
      "九五：東鄰殺牛不如西鄰薄祭，誠心最重要。",
      "上六：頭濕而危象，終有險。"
    ]
  },

  "101010": {
    name: "火水未濟",
    guaText: "未濟：亨；小狐汔濟，濡其尾，无攸利。",
    lineTexts: [
      "初六：濡其尾，吝。",
      "九二：曳其輪，貞吉。",
      "六三：未濟，征凶；利涉大川。",
      "九四：貞吉，悔亡；震用伐鬼方，三年有賞于大國。",
      "六五：貞吉，无悔；君子之光，有孚，吉。",
      "上九：有孚于飲酒，无咎；濡其首，有孚失是。"
    ],
    lineNotes: [
      "初六：尾巴沾濕，象徵做事差一步而吝。",
      "九二：拖車輪，守正則吉。",
      "六三：未完成，冒進凶；但可跨越大川。",
      "九四：守正吉悔亡；努力終獲大賞。",
      "六五：君子的光明可信，吉。",
      "上九：飲酒有誠則無咎；但頭濕失其正。"
    ]
  }

};

/* 如果查無資料，顯示 fallback 範本 */
function getHexData(binary) {
    if (hexagramDatabase[binary]) return hexagramDatabase[binary];
    return {
        name: "未收錄卦",
        guaText: "此卦辭尚未收錄。如需完整 64 卦卦辭與爻辭，請告訴我，我會幫您補齊。",
        lineTexts: ["（卦辭未收錄）","（卦辭未收錄）","（卦辭未收錄）","（卦辭未收錄）","（卦辭未收錄）","（卦辭未收錄）"],
        lineNotes: ["（白話未收錄）","（白話未收錄）","（白話未收錄）","（白話未收錄）","（白話未收錄）","（白話未收錄）"]
    };
}

/* hex name table（供快速顯示） */
const hexagramNames = {
    "111111":"乾為天","000000":"坤為地","100010":"水雷屯","010001":"山水蒙","111010":"水天需","010111":"天水訟",
    "010000":"地水師","000010":"水地比","111011":"風天小畜","110111":"天澤履","111000":"地天泰","000111":"天地否",
    "101111":"天火同人","111101":"火天大有","001000":"地山謙","000100":"雷地豫","100110":"澤雷隨","011001":"山風蠱",
    "110000":"地澤臨","000011":"風地觀","100101":"火雷噬嗑","101001":"山火賁","000001":"山地剝","100000":"地雷復",
    "100111":"天雷無妄","111001":"山天大畜","100001":"山雷頤","011110":"澤風大過","010010":"坎為水","101101":"離為火",
    "001110":"澤山咸","011100":"雷風恆","001111":"天山遯","111100":"雷天大壯","000101":"火地晉","101000":"地火明夷",
    "101011":"風火家人","110101":"火澤睽","001010":"水山蹇","010100":"雷水解","110001":"山澤損","100011":"風雷益",
    "111110":"澤天夬","011111":"天風姤","000110":"澤地萃","011000":"地風升","010110":"澤水困","011010":"水風井",
    "101110":"澤火革","011101":"火風鼎","100100":"震為雷","001001":"艮為山","001011":"風山漸","110100":"雷澤歸妹",
    "101100":"雷火豐","001101":"火山旅","011011":"巽為風","110110":"兌為澤","010011":"風水渙","110010":"水澤節",
    "110011":"風澤中孚","001100":"雷山小過","101010":"水火既濟","010101":"火水未濟"
};

/* -------------------------
   擲筊與繪圖（原有邏輯整合）
   ------------------------- */
function castHexagram() {
    const resultDiv = document.getElementById('result');
    const loading = document.getElementById('loading');
    const extra = document.getElementById('extra');
    resultDiv.style.opacity = 0;
    loading.style.display = 'inline';
    extra.style.display = 'none';
    setTimeout(()=> {
        loading.style.display = 'none';
        generateGua();
        resultDiv.style.opacity = 1;
    }, 500);
}

function tossCoins() {
    let sum=0;
    for(let i=0;i<3;i++){ sum += (Math.random()<0.5)?2:3; }
    return sum; // 6,7,8,9
}

function generateGua() {
    const lines=[];
    for(let i=0;i<6;i++) lines.push(tossCoins());
    renderResult(lines);
}

/* draws gua - reuse earlier style */
function drawGuaHTML(lines,isZhi) {
    const box = document.createElement('div');
    box.className = 'lines-box';
    lines.forEach(val=>{
        const lineDiv = document.createElement('div');
        lineDiv.className='line';
        if(val===7||val===9){
            const d = document.createElement('div');
            d.className='yang' + ((!isZhi && val===9)?' moving':'');
            d.style.width='100%';
            lineDiv.appendChild(d);
        } else {
            const d = document.createElement('div');
            d.className='yin' + ((!isZhi && val===6)?' moving':'');
            lineDiv.appendChild(d);
        }
        box.appendChild(lineDiv);
    });
    return box;
}

function binaryFromLines(lines) {
    // lines array 初爻在 index 0 至 上爻 index 5
    return lines.map(v => (v===7||v===9)?'1':'0').join('');
}

function getZhiLines(lines){
    return lines.map(v => {
        if(v===6) return 7; // 老陰 -> 少陽
        if(v===9) return 8; // 老陽 -> 少陰
        return v;
    });
}

/* 渲染結果並顯示卦辭/爻辭白話 */
function renderResult(lines) {
    const resultDiv = document.getElementById('result');
    resultDiv.innerHTML = ''; // clear

    // 本卦
    const benBox = document.createElement('div');
    benBox.className='gua card';
    const benTitle = document.createElement('div');
    benTitle.className='gua-title';
    const benBinary = binaryFromLines(lines);
    const benName = hexagramNames[benBinary] || "未知卦";
    benTitle.innerText = "本卦：" + benName;
    benBox.appendChild(benTitle);
    benBox.appendChild(drawGuaHTML(lines,false));

    // 之卦（若有變爻）
    const hasMoving = lines.some(v => v===6 || v===9);
    const zhiBox = document.createElement('div');
    zhiBox.className='gua card';
    const zhiTitle = document.createElement('div'); zhiTitle.className='gua-title';
    if(hasMoving){
        const zhiLines = getZhiLines(lines);
        const zhiBinary = binaryFromLines(zhiLines);
        const zhiName = hexagramNames[zhiBinary] || "未知卦";
        zhiTitle.innerText = "之卦：" + zhiName;
        zhiBox.appendChild(zhiTitle);
        zhiBox.appendChild(drawGuaHTML(zhiLines,true));
    } else {
        zhiTitle.innerText = "之卦：無（六爻安定）";
        zhiBox.appendChild(zhiTitle);
        zhiBox.appendChild(document.createElement('div'));
    }

    resultDiv.appendChild(benBox);
    resultDiv.appendChild(zhiBox);

    // 顯示卦辭與爻辭（含白話）
    const extra = document.getElementById('extra');
    extra.style.display = 'block';
    const interp = document.getElementById('interpretation');
    interp.innerHTML = '';

    // 本卦資料
    const benData = getHexData(benBinary);
    const benBlock = document.createElement('div');
    benBlock.className='gua-desc';
    benBlock.innerHTML = `<div class="section-title">本卦 — ${benData.name}</div>
                          <div><strong>卦辭（原文）：</strong><pre>${benData.guaText}</pre></div>`;
    // 爻辭列出
    const linesHtml = document.createElement('div');
    linesHtml.innerHTML = `<div class="section-title">爻辭（自下而上）</div>`;
    for(let i=0;i<6;i++){
        const idx = i;
        const lineTxt = benData.lineTexts[idx] || "（經文未收錄）";
        const note = benData.lineNotes[idx] || "（白話未收錄）";
        const li = document.createElement('div');
        li.className='line-item';
        li.innerHTML = `<div><strong>第 ${idx+1} 爻：</strong> ${lineTxt}</div>
                        <div class="small"><strong>白話：</strong> ${note}</div>`;
        // 標示是否為變爻
        const realVal = lines[idx];
        if(realVal===6 || realVal===9){
            const mv = document.createElement('div');
            mv.className='notice';
            mv.innerHTML = `<strong>變爻提示：</strong> 此爻為 <em>${realVal===6 ? '老陰（變爻）' : '老陽（變爻）'}</em>，在變化後會改變。`;
            li.appendChild(mv);
        }
        linesHtml.appendChild(li);
    }
    benBlock.appendChild(linesHtml);
    interp.appendChild(benBlock);

    // 若有變爻，顯示之卦爻辭（嘗試從資料庫取）
    if(hasMoving){
        const zhiLines = getZhiLines(lines);
        const zhiBinary = binaryFromLines(zhiLines);
        const zhiData = getHexData(zhiBinary);
        const zhiBlock = document.createElement('div');
        zhiBlock.className='gua-desc';
        zhiBlock.innerHTML = `<div class="section-title">之卦 — ${zhiData.name}</div>
                              <div><strong>卦辭（原文）：</strong><pre>${zhiData.guaText}</pre></div>`;
        // 爻辭
        const zli = document.createElement('div');
        zli.innerHTML = `<div class="section-title">變卦爻辭（自下而上）</div>`;
        for(let i=0;i<6;i++){
            const lineTxt = zhiData.lineTexts[i] || "（經文未收錄）";
            const note = zhiData.lineNotes[i] || "（白話未收錄）";
            const li2 = document.createElement('div');
            li2.className='line-item';
            li2.innerHTML = `<div><strong>第 ${i+1} 爻：</strong> ${lineTxt}</div>
                             <div class="small"><strong>白話：</strong> ${note}</div>`;
            zli.appendChild(li2);
        }
        zhiBlock.appendChild(zli);
        interp.appendChild(zhiBlock);
    }
}
</script>
</body>
</html>




